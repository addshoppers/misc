<script type="text/javascript"> 
// Init code          
function initSocialLogin() {
  AddShoppersWidget.API.Event.bind("sign_in", addSocialLogin); //when a successful sign in is processedcall this function
};


// Create Account 
function addSocialLogin(params) {    
    var service = params.network; //set "service" as the network the user logged in with
    var data = AddShoppersWidget.API.User.signed_data(); //this is the user data object returned from the network
     if (AddShoppersWidget.API.User.signed(service)) { //if the user is signed in aka the request completed
      	//console.log(data);
        var email = data[service + '_email']; //set email to email returned from the social network
        if (email) { //if the email exists
            if (service !='twitter' ) {// most networks except twitter return first and last name as separate fields
               	var firstName = data[service + '_firstname'];
                var lastName = data[service + '_lastname'];
                  var name = firstName + ' ' + lastName; 
            } else { //twitter returns a single name field so it needs to be broken up
                var name = data[service + '_name']; 
                name = name.replace("_", " ");
                var firstName = name.substr(0,name.indexOf(' '));
	            var lastName = name.substr(name.indexOf(' ')+1);
            }
	        //console.log(firstName + lastName + email );
	        //-----------Make your api request here to initiate the login process---------------

	        //       jQuery.ajax({ //example api ajax request
	        //             type: "GET",
	        //             url: "https://example.com/some/api/url",
	        //             data: { data: data,email: email },
	        //             success: function (resp) {
	        //                     console.log(resp);
	        //             }
	        //		});
            }
    }      
}
</script>

<script type="text/javascript"> 
// -------Bind events to call init when page loads
if (window.addEventListener) {			
   window.addEventListener("load", initSocialLogin, false); 
} else {
   document.onreadystatechange = function() { 
    if(document.readyState in {loaded: 1, complete: 1}) {
	document.onreadystatechange = null; 
       initSocialLogin();			
    } 
  }					
} 
</script>					


<!-- DIV TAG TO ADD TO PAGE TO SHOW THE DESIRED SOCIAL LOGIN BUTTON 
(these can be customized and there are 3 sizes "small","medium","big" as well) -->

<!-- Facebook -->
<div class="social-commerce-signin-facebook" data-style="logoandtext" data-size="small"></div>
<!-- Paypal -->
<div class="social-commerce-signin-paypal" data-style="logoandtext" data-size="small"></div>
<!--LinkedIn -->				
<div class="social-commerce-signin-linkedin" data-style="logoandtext" data-size="small"></div>
<!-- Google -->				
<div class="social-commerce-signin-google" data-style="logoandtext" data-size="small"></div>
